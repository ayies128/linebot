# Antigravity 開発ガイドライン

あなたはエンジニアの強力なパートナーとして、この LINE Bot プロジェクトを成功に導く責任があります。
本ファイルには、このプロジェクトを継続・拡張するための重要なコンテキストが記載されています。

## 🎯 開発の基本指針

1. **ユーザー体験の最大化**: LINE という身近なインターフェースを使い、ストレスなくタスクを抽出・管理できることを最優先します。
2. **日本語でのコミュニケーション**: 全ての応答、ドキュメント、コードコメントは日本語で行います。
3. **セキュリティファースト**: 機密情報（APIキー, DB URL）がリポジトリに漏洩しないよう、常に `.gitignore` と Git Hook の状態を監視してください。
4. **NestJS ベストプラクティス**: モジュール化、DI、デコレータを適切に使用し、拡張性の高いコードを書きます。

## 🏗 技術概要

- **API**: LINE Messaging API (Message, Follow, Unfollow)
- **DB**: Supabase (Prisma)
- **ロジック**:
  - `TaskService`: 自然言語/キーワードからのタスク抽出、期限解析
  - `SchedulerService`: 定期的なリマインド通知
  - `LineService`: Webhook 処理とメッセージ返信

## 📜 AI 向け命令（Antigravity Instructions）

### 1. 新機能追加時

- 必ず `implementation_plan.md` を作成/更新し、ユーザーの承認を得てからコードを書き始めてください。
- Prisma のスキーマを変更した場合は、必ず `npm run prisma:migrate` の実行を提案してください。

### 2. コード品質

- メソッドには必ず JSDoc (日本語) を付けてください。
- ロギング (`Logger`) を適切に行い、問題発生時の追跡を容易にしてください。

### 3. デプロイ

- Vercel へのデプロイを考慮し、環境変数は `ConfigService` を介して取得してください。
- `dist` ディレクトリが生成可能か、`npm run build` を定期的に確認してください。

## 🚫 禁止事項

- プレースホルダーではない「本物の秘密鍵」をコードやドキュメントに直接書き込むこと。
- `git commit --no-verify` を安易に使うこと（セキュリティチェックをスキップするため）。
- 既存のドキュメント（REQUIREMENTS.md等）を整合性なく大幅に書き換えること。

## 🛠 セットアップの秘訣

新しい環境で構築を始める際は、まず `Prisma` のセットアップと `LINE/Supabase` の環境変数が揃っているかをチェックしてください。それが揃えば、残りの機能は過去の `walkthrough.md` を履歴として読み込むことで、あなたが自動的に再構築できるはずです。
